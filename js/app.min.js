"use strict";function toFahrenheit(e){return Math.round(1.8*(e-273.15)+32)}function toCelcius(e){return Math.round(e-273.15)}function introAnimate(){document.getElementById("intro").style.display="flex",TweenMax.from(document.querySelectorAll("#intro div h1"),1.5,{delay:.5,ease:Power1.easeIn,marginTop:"-60px",opacity:0}),TweenMax.from(document.querySelectorAll("#intro div h4"),1,{delay:2,ease:Power4.easeIn,opacity:0}),TweenMax.to(document.querySelectorAll("#intro div"),1,{delay:6,ease:Power4.easeOut,opacity:0,marginTop:"-40px"}),window.setTimeout(function(){document.getElementById("intro").style.display="none"},7e3)}function headerAnimate(){document.getElementsByTagName("header")[0].style.display="block",TweenMax.from(document.getElementsByTagName("header"),1,{ease:Power3.easeInOut,marginTop:"-80px"})}function loadingShow(){document.getElementById("loading").style.display="block",TweenMax.from(document.getElementById("loading"),1,{ease:Power4.easeOut,opacity:0,marginTop:"-40px"})}function loadingHide(){TweenMax.to(document.getElementById("loading"),1,{ease:Power4.easeOut,opacity:0,marginTop:"-40px"}),window.setTimeout(function(){document.getElementById("loading").style.display="none"},2e3)}function aboutAnimate(){"active"!=document.getElementById("about").classList[0]?(document.getElementById("about").classList.add("active"),document.getElementById("credit").style.display="block",TweenMax.to(document.getElementById("bg"),1,{ease:Power4.easeOut,top:"0px"}),TweenMax.to(document.getElementById("credit"),2,{ease:Power4.easeOut,opacity:1,top:"80px"})):(document.getElementById("about").classList.remove("active"),TweenMax.to(document.getElementById("bg"),1,{ease:Power4.easeOut,top:"-200vh"}),TweenMax.to(document.getElementById("credit"),2,{ease:Power4.easeOut,opacity:0,top:"0px"}))}function resultAnimate(e){loadingHide(),window.setTimeout(function(){document.getElementById("result").style.display="block",null===e?document.getElementById("result-text").innerHTML="Sorry, couldn't get weather data":"Rain"===e.list[0].weather[0].main||"Rain"===e.list[1].weather[0].main||"Rain"===e.list[2].weather[0].main?document.getElementById("result-text").innerHTML="Yep, "+e.city.name+" weather isn't looking too good":document.getElementById("result-text").innerHTML="Don't bother with a coat, "+e.city.name+" weather's great!"},2e3),TweenMax.from(document.getElementById("result"),1,{delay:2,ease:Power4.easeOut,opacity:0,marginTop:"-40px"})}function temperatureTilesShow(e){var t=toFahrenheit(e.list[0].main.temp),n=e.list[0].weather[0].main;toFahrenheit(e.list[1].main.temp),e.list[1].weather[0].main;temperatureNowAnimate(t,n),temperatureLaterAnimate(t,n)}function temperatureNowAnimate(e,t){document.getElementById("now").style.display="block",document.querySelectorAll("#now .description")[0].innerHTML=t,document.querySelectorAll("#now img")[0].src=displayPicture(t),document.querySelectorAll("#now .temp")[0].innerHTML=e,TweenMax.from(document.getElementById("now"),1,{delay:3,ease:Power4.easeOut,opacity:0,marginTop:"-40px"})}function temperatureLaterAnimate(e,t){document.getElementById("later").style.display="block",document.querySelectorAll("#later .description")[0].innerHTML=t,document.querySelectorAll("#later img")[0].src=displayPicture(t),document.querySelectorAll("#later .temp")[0].innerHTML=e,TweenMax.from(document.getElementById("later"),1,{delay:4,ease:Power4.easeOut,opacity:0,marginTop:"-40px"})}function displayPicture(e){var t=(new Date).getHours();return"Rain"===e||"Drizzle"===e?"img/rain.png":"Snow"===e?"img/snow.png":"Clouds"===e?"img/cloud.png":"Thunderstorm"===e?"img/thunder.png":"Clear"===e&&!(5<t<17)?"img/moon.png":"Clear"===e?"img/sun.png":"img/swirl.png"}function getLocation(){function e(e){getWeather(e.coords.latitude,e.coords.longitude)}function t(){displayResult(null)}navigator.geolocation.getCurrentPosition(e,t)}function getWeather(e,t){var n="eef54fef4f484053c798c7b450ab75ab",o=new XMLHttpRequest;o.open("GET","http://api.openweathermap.org/data/2.5/forecast?lat="+e+"&lon="+t+"&appid="+n,!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=JSON.parse(o.responseText);resultAnimate(e),temperatureTilesShow(e)}else resultAnimate(null)},o.onerror=function(){resultAnimate(null)},o.send()}introAnimate(),window.setTimeout(headerAnimate,7e3),window.setTimeout(loadingShow,7500),document.getElementById("about").addEventListener("click",aboutAnimate),document.getElementById("logo").addEventListener("click",function(){location.reload()}),window.setTimeout(getLocation,7e3);