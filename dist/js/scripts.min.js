function getLocation(){return new Promise(function(n,o){function e(o){n(o)}function t(){}navigator.geolocation.getCurrentPosition(e,t)})}function callAPI(n,o){return new Promise(function(e,t){console.log(n,o);var a=new XMLHttpRequest;a.onload=function(){e(JSON.parse(this.responseText))},a.onerror=t,a.open("GET","http://api.openweathermap.org/data/2.5/weather?lat="+n+"&lon="+o+"&appid="+apiKey),a.send()})}var apiKey="eef54fef4f484053c798c7b450ab75ab";document.addEventListener("DOMContentLoaded",function(n){getLocation().then(function(n){var o=n.coords.latitude,e=n.coords.longitude;console.log(o,e),callAPI(o,e)}).then(function(n){console.log(n)})["catch"](function(){})});