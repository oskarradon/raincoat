function getLocation(){function e(e){var t=e.coords.latitude,n=e.coords.longitude;getWeather(t,n)}function t(){document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result-text").innerHTML="Woah, couldn't find your location!"}navigator.geolocation.getCurrentPosition(e,t)}function getWeather(e,t){var n="eef54fef4f484053c798c7b450ab75ab",o=new XMLHttpRequest;o.open("GET","http://api.openweathermap.org/data/2.5/forecast?lat="+e+"&lon="+t+"&appid="+n,!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=JSON.parse(o.responseText);console.log(e),document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block",console.log(e.list[0].weather[0].main),"Rain"!==e.list[0].weather[0].main&&"Rain"!==e.list[1].weather[0].main&&"Rain"!==e.list[2].weather[0].main||(document.getElementById("result-text").innerHTML="Yep, "+e.city.name+" weather isn't looking too good.")}else document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result-text").innerHTML="Whoops, couldn't check the weather.",console.log("server error ",o.status)},o.onerror=function(){document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result-text").innerHTML="Whoops, couldn't check the weather.",console.log("API connection error")},o.send()}getLocation();