function getLocation(){function o(o){var n=o.coords.latitude,e=o.coords.longitude;console.log(n,e),callAPI(n,e)}function n(){console.log("GPS error")}navigator.geolocation.getCurrentPosition(o,n)}function callAPI(o,n){return new Promise(function(e,t){var a=new XMLHttpRequest;a.onload=function(){e(JSON.parse(this.responseText))},a.onerror=t,a.open("GET","http://api.openweathermap.org/data/2.5/weather?lat="+o+"&lon="+n+"&appid="+apiKey),a.send()})}var apiKey="eef54fef4f484053c798c7b450ab75ab";document.addEventListener("DOMContentLoaded",function(o){getLocation()}),callAPI().then(function(o){console.log(o)})["catch"](function(){});