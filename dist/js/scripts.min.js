"use strict";function displayResult(e){document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block",document.getElementById("result-text").innerHTML=e}function displayTemperatureNow(e,t,n){document.getElementById("now").style.display="block",document.querySelectorAll("#now .temps .low-temp")[0].innerHTML=e+"&#176;",document.querySelectorAll("#now .temps .high-temp")[0].innerHTML=t+"&#176;",document.querySelectorAll("#now .description")[0].innerHTML=n,document.querySelectorAll("#now img")[0].src=displayPicture(n)}function displayTemperatureLater(e,t,n){document.getElementById("later").style.display="block",document.querySelectorAll("#later .temps .low-temp")[0].innerHTML=e+"&#176;",document.querySelectorAll("#later .temps .high-temp")[0].innerHTML=t+"&#176;",document.querySelectorAll("#later .description")[0].innerHTML=n,document.querySelectorAll("#later img")[0].src=displayPicture(n)}function displayPicture(e){var t=(new Date).getHours();return"Rain"===e||"Drizzle"===e?"../img/rain.png":"Snow"===e?"../img/snow.png":"Clouds"===e?"../img/clouds.png":"Thunderstorm"===e?"../img/thunder.png":"Clear"===e&&17<t>5?"../img/moon.png":"Clear"===e?"..img/sun.png":"../img/swirl.png"}function getLocation(){function e(e){getWeather(e.coords.latitude,e.coords.longitude)}function t(){displayResult("Woah, couldn't find your location!")}navigator.geolocation.getCurrentPosition(e,t)}function getWeather(e,t){var n="eef54fef4f484053c798c7b450ab75ab",i=new XMLHttpRequest;i.open("GET","http://api.openweathermap.org/data/2.5/forecast?lat="+e+"&lon="+t+"&appid="+n,!0),i.onload=function(){if(i.status>=200&&i.status<400){var e=JSON.parse(i.responseText);if("Rain"===e.list[0].weather[0].main||"Rain"===e.list[1].weather[0].main||"Rain"===e.list[2].weather[0].main){displayResult("Yep, "+e.city.name+" weather isn't looking too good.");var t=toFahrenheit(e.list[0].main.temp_min),n=toFahrenheit(e.list[0].main.temp_max),o=e.list[0].weather[0].main,r=toFahrenheit(e.list[1].main.temp_min),a=toFahrenheit(e.list[1].main.temp_max),l=e.list[1].weather[0].main;displayTemperatureNow(t,n,o),displayTemperatureLater(r,a,l)}}else displayResult("Hmm, couldn't get any weather data.")},i.onerror=function(){displayResult("Hmm, couldn't get any weather data.")},i.send()}function toFahrenheit(e){return Math.round(1.8*(e-273.15)+32)}function toCelcius(e){return Math.round(e-273.15)}getLocation();